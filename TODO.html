<!DOCTYPE html>
<html>
<head>
<title>TODO.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="series-changes">Series Changes</h1>
<p>This document describes the necessary and remaining changes for the Series update.</p>
<h2 id="frontend-changes">Frontend Changes</h2>
<p>These changes MUST be hidden behind a feature-flag <code>series-released</code>, unless
otherwise noted. This feature flag MUST require an app release to be changed
(since the payment apis will be disabled until requested via app review)</p>
<h3 id="existing-screens">Existing screens</h3>
<h4 id="homepage">Homepage</h4>
<p>the homepage (pick emotion) screen</p>
<ul>
<li><input type="checkbox" id="checkbox0"><label for="checkbox0">Bottom Nav: add a bottom nav bar with </label><code>Home</code> highlighted and buttons to
<code>Series</code> and <code>Account</code> (settings)</li>
</ul>
<h4 id="settings">Settings</h4>
<ul>
<li><input type="checkbox" id="checkbox1"><label for="checkbox1">Fonts and spacing slightly reworked (not hidden behind feature flag)</label></li>
<li><input type="checkbox" id="checkbox2"><label for="checkbox2">Account gains </label><code>Upgrade to Oseh+</code> or <code>Manage Membership</code> button based on if
the user is not subscribed to Oseh+ or is subscribed to Oseh+, respectively.
The <code>Upgrade to Oseh+</code> goes to the new upgrade screen (<code>settings</code> variant),
and <code>Manage Membership</code> depends on the source of the membership:
<ul>
<li><input type="checkbox" id="checkbox3"><label for="checkbox3">stripe links to their customer portal https://stripe.com/docs/no-code/customer-portal</label></li>
<li><input type="checkbox" id="checkbox4"><label for="checkbox4">ios / android has a button to cancel membership, which explains where to go</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox5"><label for="checkbox5">Support gains a </label><code>Restore Purchases</code> button which triggers
https://www.revenuecat.com/docs/restoring-purchases followed by a popup indicating
success/failure
https://revenuecat.github.io/react-native-purchases-docs/7.18.0/classes/default.html#restorePurchases</li>
</ul>
<h4 id="course-activation-screen">Course Activation Screen</h4>
<ul>
<li><input type="checkbox" id="checkbox6"><label for="checkbox6">Update to new backend /courses/activate response format</label></li>
</ul>
<h3 id="new-screens">New screens</h3>
<h4 id="series-listing">Series listing</h4>
<p>the main series listing screen, navigated to via the bottom bar in the home screen</p>
<ul>
<li><input type="checkbox" id="checkbox7"><label for="checkbox7">InfiniteList series in descending order, incorporating the following:</label>
<ul>
<li><input type="checkbox" id="checkbox8"><label for="checkbox8">thumbhash background while loading</label></li>
<li><input type="checkbox" id="checkbox9"><label for="checkbox9">background image, darkened standard @ 342x427 / 684x854 / 1026x1281 based on dpi</label></li>
<li><input type="checkbox" id="checkbox10"><label for="checkbox10">course logo, centered, fixed width 310px, height according to aspect ratio; svg</label>
includes required spacing if filling 310w is not desired</li>
<li><input type="checkbox" id="checkbox11"><label for="checkbox11">instructor name</label></li>
<li><input type="checkbox" id="checkbox12"><label for="checkbox12">tapping navigates to series preview screen for that series if a video ref is</label>
available, otherwise straight to the series details page</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox13"><label for="checkbox13">Bottom nav, like in home, series highlighted</label></li>
</ul>
<h4 id="series-preview">Series preview</h4>
<p>given a single series a screen incorporating the following:</p>
<ul>
<li><input type="checkbox" id="checkbox14"><label for="checkbox14">background is series intro video;</label></li>
<li><input type="checkbox" id="checkbox15"><label for="checkbox15">back button upper left which navigates to series listing page</label></li>
<li><input type="checkbox" id="checkbox16"><label for="checkbox16">closed captioning toggle</label></li>
<li><input type="checkbox" id="checkbox17"><label for="checkbox17">mute toggle</label></li>
<li><input type="checkbox" id="checkbox18"><label for="checkbox18">instructor name</label></li>
<li><input type="checkbox" id="checkbox19"><label for="checkbox19">series name</label></li>
<li><input type="checkbox" id="checkbox20"><label for="checkbox20">number of classes in series</label></li>
<li><input type="checkbox" id="checkbox21"><label for="checkbox21">play / pause button in center</label></li>
<li><input type="checkbox" id="checkbox22"><label for="checkbox22">time progress at bottom</label>
<ul>
<li><input type="checkbox" id="checkbox23"><label for="checkbox23">current time</label></li>
<li><input type="checkbox" id="checkbox24"><label for="checkbox24">total time</label></li>
<li><input type="checkbox" id="checkbox25"><label for="checkbox25">indicator bar</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox26"><label for="checkbox26">seeking</label>
<ul>
<li><input type="checkbox" id="checkbox27"><label for="checkbox27">(minimum) tap to seek</label></li>
<li><input type="checkbox" id="checkbox28"><label for="checkbox28">(desirable) drag to seek</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox29"><label for="checkbox29">view series button takes you to series details screen</label></li>
</ul>
<h4 id="series-details-screen">Series details screen</h4>
<ul>
<li><input type="checkbox" id="checkbox30"><label for="checkbox30">series title</label></li>
<li><input type="checkbox" id="checkbox31"><label for="checkbox31">instructor</label></li>
<li><input type="checkbox" id="checkbox32"><label for="checkbox32">favorite button</label></li>
<li><input type="checkbox" id="checkbox33"><label for="checkbox33">series description</label></li>
<li><input type="checkbox" id="checkbox34"><label for="checkbox34">(optional) social proof</label></li>
<li><input type="checkbox" id="checkbox35"><label for="checkbox35">number of classes</label></li>
<li><input type="checkbox" id="checkbox36"><label for="checkbox36">(optional) resources</label></li>
<li><input type="checkbox" id="checkbox37"><label for="checkbox37">unlock button when not an oseh+ member</label></li>
<li><input type="checkbox" id="checkbox38"><label for="checkbox38">classes listing (finite, eagerly loaded)</label>
<ul>
<li><input type="checkbox" id="checkbox39"><label for="checkbox39">background @ 342x133 / 684x266 / 1026x399</label></li>
<li><input type="checkbox" id="checkbox40"><label for="checkbox40">title</label></li>
<li><input type="checkbox" id="checkbox41"><label for="checkbox41">description</label></li>
<li><input type="checkbox" id="checkbox42"><label for="checkbox42">duration</label></li>
<li><input type="checkbox" id="checkbox43"><label for="checkbox43">played indicator (checkmark, text next to duration)</label></li>
<li><input type="checkbox" id="checkbox44"><label for="checkbox44">tap to play for Oseh+, tap to go to upgrade screen for non-Oseh+</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox45"><label for="checkbox45">(optional) resources</label></li>
</ul>
<h4 id="upgrade-screen">Upgrade screen</h4>
<ul>
<li>
<p><input type="checkbox" id="checkbox46"><label for="checkbox46">header image @ full width, aspect ratio 390x190</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox47"><label for="checkbox47">oseh+ logo</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox48"><label for="checkbox48">close button, context sensitive (maybe this is a modal rather than a screen)</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox49"><label for="checkbox49">variable title</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox50"><label for="checkbox50">variable value props with icons</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox51"><label for="checkbox51">yearly option, monthly option https://www.revenuecat.com/docs/displaying-products</label>
https://www.revenuecat.com/reference/get-offerings
https://revenuecat.github.io/react-native-purchases-docs/7.18.0/classes/default.html#getOfferings
provides: https://revenuecat.github.io/react-native-purchases-docs/7.18.0/interfaces/PurchasesOfferings.html</p>
<pre><code>then we go to &quot;current&quot; to get the suggested package

then we display them, iterating through the packages in order?
['weekly', 'monthly', 'twoMonth', 'threeMonth', 'sixMonth', 'annual', 'lifetime']

request for display in figma: https://meetoseh.slack.com/archives/C029H3HDU6N/p1706898889117869

each one gives a https://revenuecat.github.io/react-native-purchases-docs/7.18.0/interfaces/PurchasesPackage.html

which includes https://revenuecat.github.io/react-native-purchases-docs/7.18.0/interfaces/PurchasesStoreProduct.html

which we need to be able to present:

- available discounts (cycle / period / priceString)[]
- intro price (cycles / period / priceString)
- price and priceString
- google has subscription options?
- period in ISO8601, e.g., P1W
</code></pre>
</li>
<li>
<p><input type="checkbox" id="checkbox52"><label for="checkbox52">subscribe button to trigger https://www.revenuecat.com/docs/making-purchases</label></p>
</li>
</ul>
<h4 id="owned-tab-in-my-library-coursejourneyslist">Owned tab in my library (CourseJourneysList)</h4>
<ul>
<li><input type="checkbox" id="checkbox53"><label for="checkbox53">add explicit filter to joined course at neq null</label></li>
</ul>
<h4 id="images">Images</h4>
<ul>
<li><input type="checkbox" id="checkbox54"><label for="checkbox54">web support for SVG exports</label></li>
<li><input type="checkbox" id="checkbox55"><label for="checkbox55">verify app doesn't break when given SVG</label></li>
</ul>
<h2 id="frontend-ssr-changes">Frontend-SSR changes</h2>
<h3 id="series-share-page">Series share page</h3>
<p><code>/shared/series/{slug}</code> acts for courses as <code>/shared/{slug}</code> acts for journeys</p>
<h2 id="backend-api-changes">Backend API changes</h2>
<p>These changes MUST all be backwards-compatible for the app, until at least 1 month
post-update to allow time for rolling updates. To verify this, the api changes
should be made before any client changes and then the app client should be confirmed
to still work without changes.</p>
<h3 id="existing">Existing</h3>
<h4 id="coursesmine">/courses/mine</h4>
<p>This endpoint is currently unused; it was previously used when users were presented a
popup to continue where they left off on courses.</p>
<p>Should be removed. Current example response:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"courses"</span>: [
    {
      <span class="hljs-attr">"uid"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"slug"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"title_short"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"background_image"</span>: {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">"jwt"</span>: <span class="hljs-string">"string"</span>
      },
      <span class="hljs-attr">"circle_image"</span>: {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">"jwt"</span>: <span class="hljs-string">"string"</span>
      }
    }
  ]
}
</div></code></pre>
<p>This is using &quot;ExternalCourse&quot;, also used in activate course and attach free
course. Activate course is for converting a stripe checkout session to a revenue
cat entitlement and associated attached course, whereas attach free converts a
slug to a revenue cat entitlement and associated attached course (given that the
slug is in a predefined list).</p>
<p>Both are only called on the web client and can be easily adapted to a new
response format: attach_free has its response body completely ignored by the
frontend, and <code>activate</code> only needs the background image, title, and visitor
uid.</p>
<h4 id="api1usersmesearchcoursejourneys">/api/1/users/me/search_course_journeys</h4>
<p>This endpoint currently drives the Owned tab of the Library screen
(Favorites/History/Owned), and is a mostly general way of searching
journeys in series, except restricted to journeys in series the user has attached.</p>
<p>This needs to be altered to allow including journeys in series the user
hasn't attached, to accommodate for the new series details page for series
included in Oseh+. The basic way to accomplish this is:</p>
<ul>
<li>alter MinimalCourseJourney such that <code>joined_course_at</code> is optional, and
update the docs for <code>is_next</code> so it's false if they haven't joined the
course yet</li>
<li>alter MinimalCourse to include the series instructor name</li>
<li>since the client can filter on <code>joined_course_at neq null</code> already, no
additional filters are required to accomodate the current usecase</li>
<li>since the client can filter on <code>course_uid</code> already, no additional filters
are required to accomodate the new usecase</li>
<li>for permissions however we are currently using the attachment to know the
user can see the journey; now we will need to utilize the <code>flags</code> added
to the <code>courses</code> table</li>
</ul>
<p>Additional, minimal course journey needs more information:</p>
<ul>
<li><input type="checkbox" id="checkbox56"><label for="checkbox56">background image @ 342x133 / 684x266 / 1026x399</label></li>
<li><input type="checkbox" id="checkbox57"><label for="checkbox57">duration</label></li>
<li><input type="checkbox" id="checkbox58"><label for="checkbox58">description</label></li>
<li><input type="checkbox" id="checkbox59"><label for="checkbox59">instructor name</label></li>
</ul>
<h4 id="imagefilesplaylist">/image_files/playlist</h4>
<ul>
<li><input type="checkbox" id="checkbox60"><label for="checkbox60">add support for SVG exports (just tweaking models I think)</label></li>
</ul>
<h3 id="new">New</h3>
<h4 id="coursessearchpublic">/courses/search_public</h4>
<p>Intended to work both for the series listing page and the owned tab via standard filtering.</p>
<p>Required information for the course:</p>
<ul>
<li><input type="checkbox" id="checkbox61"><label for="checkbox61">UID</label></li>
<li><input type="checkbox" id="checkbox62"><label for="checkbox62">Title</label></li>
<li><input type="checkbox" id="checkbox63"><label for="checkbox63">Description</label></li>
<li><input type="checkbox" id="checkbox64"><label for="checkbox64">Instructor</label></li>
<li><input type="checkbox" id="checkbox65"><label for="checkbox65">Favorited yes/no</label></li>
<li><input type="checkbox" id="checkbox66"><label for="checkbox66">Number of classes</label></li>
<li><input type="checkbox" id="checkbox67"><label for="checkbox67">Background @ 342x427 / 684x854 / 1026x1281</label></li>
<li><input type="checkbox" id="checkbox68"><label for="checkbox68">optional Video ref @ fullscreen portrait</label></li>
<li><input type="checkbox" id="checkbox69"><label for="checkbox69">optional Transcript ref</label></li>
<li><input type="checkbox" id="checkbox70"><label for="checkbox70">optional video thumbnail @ fullscreen portrait</label></li>
<li><input type="checkbox" id="checkbox71"><label for="checkbox71">Logo</label></li>
</ul>
<h4 id="usersmegetcustomerportal">/users/me/get_customer_portal</h4>
<p>Returns the stripe customer portal URL for the active stripe customer for the user</p>
<h2 id="schema">Schema</h2>
<p>Describes changes to the format of the database, redis entries, or diskcache entries.
Includes 1-off migrations that are required.</p>
<h3 id="existing">Existing</h3>
<h4 id="courses">courses</h4>
<ul>
<li>
<p><input type="checkbox" id="checkbox72"><label for="checkbox72">remove circle image file id [ REMEMBER DELETE GUARD ]</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox73"><label for="checkbox73">add optional video content file id [ REMEMBER DELETE GUARD ]</label>
custom exports for all iphone screen sizes 2020 and newer to get
maximum hardware acceleration (direct buffer copying), plus standard
sizes for filling in androids/desktops</p>
<ul>
<li>430x932</li>
<li>393x852</li>
<li>428x926</li>
<li>390x844</li>
<li>375x667</li>
<li>390x844</li>
<li>375x812</li>
</ul>
</li>
<li>
<p><input type="checkbox" id="checkbox74"><label for="checkbox74">add optional video thumbnail image (used while the video is loading, esp</label>
thumbhash) [ REMEMBER DELETE GUARD ]. if unspecified this will be extracted
from the video</p>
</li>
<li>
<p><input type="checkbox" id="checkbox75"><label for="checkbox75">add logo image file id [ REMEMBER DELETE GUARD ]</label>
we can include an SVG export in <code>image_file_exports</code></p>
</li>
<li>
<p><input type="checkbox" id="checkbox76"><label for="checkbox76">add instructor</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox77"><label for="checkbox77">remove title short</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox78"><label for="checkbox78">add optional share hero image [ REMEMBER DELETE GUARD ]</label></p>
</li>
<li>
<p><input type="checkbox" id="checkbox79"><label for="checkbox79">add flags, basic uint64 enum describing access. this also works</label>
for soft delete</p>
</li>
</ul>
<h3 id="new">New</h3>
<h4 id="usercourselikes">user_course_likes</h4>
<p>ability for users to like series rather than just journeys</p>
<h4 id="coursebackgroundimages">course_background_images</h4>
<p>for keeping track of which images were uploaded primarily for
the purpose of a course background; darkened version, original
version</p>
<h4 id="courseheroimages">course_hero_images</h4>
<p>for keeping track of which images were uploaded primarily for
the purpose of a course hero image</p>
<h4 id="courselogoimages">course_logo_images</h4>
<p>for keeping track of which images were uploaded primarily for
the purpose of a course logo image</p>
<h4 id="coursevideothumbnailimages">course_video_thumbnail_images</h4>
<p>for keeping track of which images were uploaded primarily for
the purpose of acting as the video thumbnail on a course video</p>
<p>should include the content_file_id of the video this was for
and if this was automatically extracted vs uploaded</p>
<h4 id="coursevideos">course_videos</h4>
<p>for keeping track of which content files were uploaded primarily
for the purpose of a course intro video</p>
<h4 id="courseslugs">course_slugs</h4>
<p>for keeping track of which slugs go to which series. we'll use
a url convention like oseh.io/shared/series/{slug}</p>
<h4 id="coursesharelinks">course_share_links</h4>
<p>Which share links were generated to go to which series</p>
<h4 id="coursesharelinkviews">course_share_link_views</h4>
<p>The views for a given series share link</p>
<h4 id="coursesharelinkstats">course_share_link_stats</h4>
<p>Statistics on share links to series; mostly focused on which techniques
were used to serve them &amp; how successful they were</p>
<h4 id="coursesharelinkuniqueviews">course_share_link_unique_views</h4>
<p>Specifically unique views for share links to series; mostly focused on
which users are sharing links and what series they are sharing</p>
<h3 id="migrations">Migrations</h3>
<h4 id="course-circle-images">course circle images</h4>
<p>needs to have circle images deleted</p>
<h4 id="course-background-images">course background images</h4>
<p>needs to have existing course background images re-exported
and added to course_background_images</p>
<h4 id="journey-background-images">journey background images</h4>
<p>needs to have background images re-exported</p>
<h4 id="course-slugs">course slugs</h4>
<p>initialize slugs for courses</p>
<h2 id="admin">Admin</h2>
<p>basically, should be a way of viewing/creating/modifying series and
corresponding analytics, improve compact journey</p>
<h3 id="admin-frontend">Admin Frontend</h3>
<h4 id="compactjourney">CompactJourney</h4>
<p>Currently compact journeys look like <a href="./todo-assets/compact_journey.jpg">this</a></p>
<p>It would be nice if we could have them look like how they will be listed in the
frontend, utilizing the new background exports, on either the
<a href="./todo-assets/new_compact_journey_opt_a.jpg">series details page</a>
or the
<a href="./todo-assets/new_compact_journey_opt_b.jpg">series public page</a>
or in
<a href="./todo-assets/new_compact_journey_opt_c.jpg">my library</a></p>
<p>notable uses: journey variations, journey feedback, user attribution</p>
<h4 id="journeyblock">JourneyBlock</h4>
<p>Add link to share page or indicate that the journey is not shareable</p>
<h4 id="series-page">Series page</h4>
<p>Add tab for listing/editing/creating courses.</p>
<p>NOTE for creating - would be ideal if had the option to &quot;create&quot; journeys as
part of the creation of a series, e.g., prepare all the requests and create
at once, utilizing localstorage. all assets (images/video) would be uploaded
eagerly</p>
<h4 id="sharing-page">Sharing page</h4>
<p>Incorporate sharing series within the page; all numbers should probably just
sum series and journeys values in the highlights, but breakdown the values for
users</p>
<h3 id="admin-backend">Admin Backend</h3>
<h4 id="coursesbackgroundimages">/courses/background_images/</h4>
<p>Uploads a series background image</p>
<h4 id="coursesbackgroundimagessearch">/courses/background_images/search</h4>
<p>Searches series background images; includes sha512 filter</p>
<h4 id="coursespreviewvideos">/courses/preview_videos/</h4>
<p>Uploads a series preview / introductory video</p>
<h4 id="coursespreviewvideossearch">/courses/preview_videos/search</h4>
<p>Searches series preview videos; includes sha512 filter</p>
<h4 id="coursesheroimages">/courses/hero_images/</h4>
<p>Uploads a series hero image</p>
<h4 id="coursesheroimagessearch">/courses/hero_images/search</h4>
<p>Searches series hero images; includes sha512 filter</p>
<h4 id="courseslogoimages">/courses/logo_images/</h4>
<p>Uploads a series logo image; prefers SVG or enormous export</p>
<h4 id="courseslogoimagessearch">/courses/logo_images/search</h4>
<p>Searches series logo images; includes sha512 filter</p>
<h4 id="journeyssearch">/journeys/search</h4>
<p>Add primary slug, add indicator for whether the journey is shareable</p>
<h4 id="coursessearch">/courses/search</h4>
<p>Intended for new admin area section on series. We use the simple name for the
admin area for consistency with e.g. journeys, users, vip chat requests, etc.</p>
<p>includes:</p>
<ul>
<li><input type="checkbox" id="checkbox80"><label for="checkbox80">UID</label></li>
<li><input type="checkbox" id="checkbox81"><label for="checkbox81">Title</label></li>
<li><input type="checkbox" id="checkbox82"><label for="checkbox82">Description</label></li>
<li><input type="checkbox" id="checkbox83"><label for="checkbox83">Instructor</label></li>
<li><input type="checkbox" id="checkbox84"><label for="checkbox84">Number of classes</label></li>
<li><input type="checkbox" id="checkbox85"><label for="checkbox85">Background ref</label></li>
<li><input type="checkbox" id="checkbox86"><label for="checkbox86">Logo ref</label></li>
<li><input type="checkbox" id="checkbox87"><label for="checkbox87">optional hero image ref</label></li>
<li><input type="checkbox" id="checkbox88"><label for="checkbox88">optional Share image ref</label></li>
<li><input type="checkbox" id="checkbox89"><label for="checkbox89">optional Video ref @ fullscreen portrait</label></li>
<li><input type="checkbox" id="checkbox90"><label for="checkbox90">optional Transcript ref</label></li>
<li><input type="checkbox" id="checkbox91"><label for="checkbox91">Primary slug / shareable</label></li>
<li><input type="checkbox" id="checkbox92"><label for="checkbox92">Flags</label></li>
<li><input type="checkbox" id="checkbox93"><label for="checkbox93">Entitlement</label></li>
<li><input type="checkbox" id="checkbox94"><label for="checkbox94">Created at</label></li>
</ul>
<h1 id="phases">Phases</h1>
<p>This section is intended to describe the required changes in the
order they will be performed.</p>
<h2 id="1-preparation-1-3-days">1. Preparation (1-3 days)</h2>
<ul>
<li><input type="checkbox" id="checkbox95"><label for="checkbox95">maintenance</label>
<ul>
<li><input type="checkbox" id="checkbox96"><label for="checkbox96">update websocket dependencies (e.g certifi, uvicorn)</label></li>
<li><input type="checkbox" id="checkbox97"><label for="checkbox97">update backend dependencies (e.g, certifi, uvicorn)</label></li>
<li><input type="checkbox" id="checkbox98"><label for="checkbox98">update job dependencies (e.g., certifi)</label></li>
<li><input type="checkbox" id="checkbox99"><label for="checkbox99">update AMIs</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox100"><label for="checkbox100">serving vector-format option for images</label>
<ul>
<li><input type="checkbox" id="checkbox101"><label for="checkbox101"></label><code>image_files</code> and <code>image_file_exports</code> documentation now explains how svgs work</li>
<li><input type="checkbox" id="checkbox102"><label for="checkbox102">Images can be served with SVG within playlist</label></li>
<li><input type="checkbox" id="checkbox103"><label for="checkbox103">Web frontend checks for SVG, app ignores it</label></li>
<li><input type="checkbox" id="checkbox104"><label for="checkbox104">Jobs images handler now includes source SVG in exports if it was rasterized</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox105"><label for="checkbox105">filtering by bit flag field</label>
<ul>
<li><input type="checkbox" id="checkbox106"><label for="checkbox106">FilterBitFieldItem</label>
<ul>
<li><input type="checkbox" id="checkbox107"><label for="checkbox107">documented as guarranteed to operate against 64-bit twos-complement int.</label>
example checking for bit 2:<pre class="hljs"><code><div>{
  <span class="hljs-attr">"operator"</span>: <span class="hljs-string">"bitexpr"</span>,
  <span class="hljs-attr">"mutation"</span>: {
    <span class="hljs-attr">"operator"</span>: <span class="hljs-string">"and"</span>,
    <span class="hljs-attr">"value"</span>: <span class="hljs-number">4</span>
  },
  <span class="hljs-attr">"comparison"</span>: {
    <span class="hljs-attr">"operator"</span>: <span class="hljs-string">"neq"</span>,
    <span class="hljs-attr">"value"</span>: <span class="hljs-number">0</span>
  }
}
</div></code></pre>
</li>
<li><input type="checkbox" id="checkbox108"><label for="checkbox108">optional bitwise operation</label>
<ul>
<li><input type="checkbox" id="checkbox109"><label for="checkbox109">&quot;BIT_NOT&quot; (&quot;not&quot;) applied via ~a</label></li>
<li><input type="checkbox" id="checkbox110"><label for="checkbox110">&quot;BIT_AND&quot; (&quot;and&quot;) applied via a&amp;b</label></li>
<li><input type="checkbox" id="checkbox111"><label for="checkbox111">&quot;BIT_OR&quot; (&quot;or&quot;) applied via a|b</label></li>
<li><input type="checkbox" id="checkbox112"><label for="checkbox112">&quot;BIT_XOR&quot; (&quot;xor&quot;) applied via (~(a&amp;b))&amp;(a|b)</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox113"><label for="checkbox113">standard operation</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox114"><label for="checkbox114">include optional transcript for journey audio content endpoint</label>
<ul>
<li><input type="checkbox" id="checkbox115"><label for="checkbox115">/journeys/audio_contents/search</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox116"><label for="checkbox116">refactor uploads to support progress indicator, better error messages</label>
<ul>
<li><input type="checkbox" id="checkbox117"><label for="checkbox117">redis key </label><code>jobs:progress:events:{uid}</code> goes to array of string json log messages
associates with the job progress with given uid. always has 24h expiration.<pre class="hljs"><code><div>{<span class="hljs-attr">"type"</span>: <span class="hljs-string">"queued"</span>|<span class="hljs-string">"started"</span>|<span class="hljs-string">"bounce"</span>|<span class="hljs-string">"progress"</span>|<span class="hljs-string">"failed"</span>|<span class="hljs-string">"succeeded"</span>,
<span class="hljs-attr">"message"</span>: <span class="hljs-string">"string"</span>,
<span class="hljs-attr">"indicator"</span>: {<span class="hljs-attr">"type"</span>: <span class="hljs-string">"bar"</span>, <span class="hljs-attr">"at"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"of"</span>: <span class="hljs-number">7</span>}|{<span class="hljs-attr">"type"</span>: <span class="hljs-string">"spinner"</span>}|{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"final"</span>}
}
</div></code></pre>
</li>
<li><input type="checkbox" id="checkbox118"><label for="checkbox118">redis key </label><code>jobs:progress:offset:{uid}</code> goes to the number indicating the
real index of the first event in <code>jobs:progress:events:{uid}</code>. we keep only
the last 50 messages in case a job is being spammy. always has 24h expiration</li>
<li><input type="checkbox" id="checkbox119"><label for="checkbox119">redis key </label><code>ps:jobs:progress:{uid}</code> is published to whenever a new event is
pushed to the right of <code>jobs:progress:events</code></li>
<li><input type="checkbox" id="checkbox120"><label for="checkbox120">lib helper function to push message to job progress</label></li>
<li><input type="checkbox" id="checkbox121"><label for="checkbox121">lib helper to create and verify job progress JWTs</label></li>
<li><input type="checkbox" id="checkbox122"><label for="checkbox122"></label><code>/api/2/jobs/{uid}</code> basic stream of <code>jobs:progress:events:{uid}</code></li>
<li><input type="checkbox" id="checkbox123"><label for="checkbox123">backend endpoint file_uploads helper includes </label><code>FileUploadWithProgressResponse</code></li>
<li><input type="checkbox" id="checkbox124"><label for="checkbox124">/shared/upload/selector/UploadedSelectorContent.tsx new component which accepts a description,</label>
path, keymap, item component, onClick and calls the click handler when one of the
items is clicked.</li>
<li><input type="checkbox" id="checkbox125"><label for="checkbox125">/shared/upload/selector/AudioContentFileChoice.tsx accepts a content</label>
file ref, optional transcript file ref, and click handler. displays
the audio content, transcript (click to toggle expanded), and select
button</li>
<li><input type="checkbox" id="checkbox126"><label for="checkbox126">/shared/upload/selector/ImageFileChoice.tsx accepts image file ref,</label>
size &amp; click handler.</li>
<li><input type="checkbox" id="checkbox127"><label for="checkbox127">/shared/upload/selector/showUploadSelector accepts modals, description,</label>
path, keymap, item component, returns <code>CancelablePromise&lt;T | null&gt;</code></li>
<li><input type="checkbox" id="checkbox128"><label for="checkbox128">/shared/upload/selector/createUploadPoller.ts</label><pre class="hljs"><code><div>(path: <span class="hljs-built_in">string</span>, sha512Key: <span class="hljs-built_in">string</span> = <span class="hljs-string">'original_file_sha512'</span>): (
  <span class="hljs-function">(<span class="hljs-params">sha512: <span class="hljs-built_in">string</span></span>) =&gt;</span> CancelablePromise&lt;T | <span class="hljs-literal">null</span>&gt;
)
</div></code></pre>
</li>
<li><input type="checkbox" id="checkbox129"><label for="checkbox129">/shared/upload/selector/UploaderContent.tsx new component which accepts</label>
description, deduplicator/poller by
<code>async (sha512: string) =&gt; CancelablePromise&lt;T | null&gt;</code>,
path to start upload which returns <code>UploadInfoWithOptionalProgress</code>, and
<code>onUploaded(t: T) =&gt; void</code></li>
<li><input type="checkbox" id="checkbox130"><label for="checkbox130">/shared/upload/showUploader accepts modals, description, poller,</label>
start upload path, onUploaded</li>
<li><input type="checkbox" id="checkbox131"><label for="checkbox131">journeys now uses showUploader / showUploadSelector</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox132"><label for="checkbox132">update upload jobs to indicate progress</label>
<ul>
<li><input type="checkbox" id="checkbox133"><label for="checkbox133">upload journey background image</label></li>
<li><input type="checkbox" id="checkbox134"><label for="checkbox134">upload journey audio content</label></li>
<li><input type="checkbox" id="checkbox135"><label for="checkbox135">upload instructor picture</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox136"><label for="checkbox136">support video uploads</label>
<ul>
<li><input type="checkbox" id="checkbox137"><label for="checkbox137">/shared/upload/selector/VideoContentFileChoice.tsx accepts size,</label>
content file ref, optional transcript file ref, and click handler.
displays video, transcript (click to toggle expanded), and select
button</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox138"><label for="checkbox138">new course access controls</label>
<ul>
<li><input type="checkbox" id="checkbox139"><label for="checkbox139">Migration to add flags to courses</label>
<ul>
<li>bit 1: false to prevent the journeys in the series from getting a public
share page (/shared/{slug})</li>
<li>bit 2: false to prevent the journeys in the series from being shared via
share links (/s/{code})</li>
<li>bit 3: false to prevent the series from getting a public share page
(/shared/series/{slug})</li>
<li>bit 4: false to prevent the series from being shared via share links
(/c/{code})</li>
<li>bit 5: false to prevent the series from being shown in the Owned tab</li>
<li>bit 6: false to prevent the journeys in the series from being shown in the
History tab.</li>
<li>bit 7: false to prevent the series from being shown in the series listing tab</li>
<li>bit 8: false to prevent the journeys in the series from being selected as
a 1-minute class in emotions</li>
<li>bit 9: false to prevent the journeys in the series from being selected as
a premium class in emotions</li>
<li>bit 10: false to prevent the series from being attached without an entitlement
(/attach_free)</li>
<li>bit 11: false to prevent the series from being shown by default in admin series
listing</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox140"><label for="checkbox140">/journeys/canonical_url/{uid} respects flags (bit 1)</label></li>
<li><input type="checkbox" id="checkbox141"><label for="checkbox141">/shared/{slug} respects flags (bit 1)</label></li>
<li><input type="checkbox" id="checkbox142"><label for="checkbox142">/sitemap.xml respects flags (bit 1, later bit 3)</label></li>
<li><input type="checkbox" id="checkbox143"><label for="checkbox143">/journeys/check_if_shareable respects flags (bit 2)</label></li>
<li><input type="checkbox" id="checkbox144"><label for="checkbox144">/journeys/follow_share_link respects flags (bit 2)</label></li>
<li><input type="checkbox" id="checkbox145"><label for="checkbox145">/s/{code} respects flags (bit 2)</label></li>
<li><input type="checkbox" id="checkbox146" checked="true"><label for="checkbox146">bit 3 is not relevant yet as at this point series cannot be shared</label></li>
<li><input type="checkbox" id="checkbox147" checked="true"><label for="checkbox147">bit 4 is not relevant yet as the series cannot be shared</label></li>
<li><input type="checkbox" id="checkbox148"><label for="checkbox148">/users/me/search_course_journeys respects flags (bit 5 for now, bit 7 as well later)</label></li>
<li><input type="checkbox" id="checkbox149"><label for="checkbox149">/courses/mine respects flags (bit 5)</label></li>
<li><input type="checkbox" id="checkbox150"><label for="checkbox150">/courses/advance respects flags (bit 5)</label></li>
<li><input type="checkbox" id="checkbox151"><label for="checkbox151">/courses/start_download respects flags (bit 5)</label></li>
<li><input type="checkbox" id="checkbox152"><label for="checkbox152">/courses/start_journey respects flags (bit 5)</label></li>
<li><input type="checkbox" id="checkbox153"><label for="checkbox153">/courses/start_next respects flags (bit 5)</label></li>
<li><input type="checkbox" id="checkbox154"><label for="checkbox154">/users/me/search_history respects flags (bit 6)</label></li>
<li><input type="checkbox" id="checkbox155"><label for="checkbox155">/users/me/start_journey_from_history respects flags (bit 6)</label></li>
<li><input type="checkbox" id="checkbox156" checked="true"><label for="checkbox156">bit 7 is not relevant yet as there is no series listing tab</label></li>
<li><input type="checkbox" id="checkbox157"><label for="checkbox157">/api/1/emotions/start_related_journey respects flags (bit 8 for now, bit 9 as well later)</label></li>
<li><input type="checkbox" id="checkbox158"><label for="checkbox158">/courses/attach_free respects flags (bit 10)</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox159"><label for="checkbox159">remove unnecessary items from frontend-web ExternalCourse parsing</label>
<ul>
<li><input type="checkbox" id="checkbox160"><label for="checkbox160">titleShort</label></li>
<li><input type="checkbox" id="checkbox161"><label for="checkbox161">circleImage</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox162"><label for="checkbox162">remove unnecessary items from backend ExternalCourse response</label>
<ul>
<li><input type="checkbox" id="checkbox163"><label for="checkbox163">title_short</label></li>
<li><input type="checkbox" id="checkbox164"><label for="checkbox164">circle_image</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox165"><label for="checkbox165">remove circle image from deletion detection in jobs</label></li>
<li><input type="checkbox" id="checkbox166"><label for="checkbox166">remove /courses/mine</label></li>
<li><input type="checkbox" id="checkbox167"><label for="checkbox167">new compact journey format in users, usable in admin</label>
<ul>
<li><input type="checkbox" id="checkbox168"><label for="checkbox168">created</label></li>
<li><input type="checkbox" id="checkbox169"><label for="checkbox169">used in journey variations</label></li>
<li><input type="checkbox" id="checkbox170"><label for="checkbox170">used in journey feedback</label></li>
<li><input type="checkbox" id="checkbox171"><label for="checkbox171">used in user attribution</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox172"><label for="checkbox172">update jobs related to journeys to add new export resolutions</label>
<ul>
<li><input type="checkbox" id="checkbox173"><label for="checkbox173">manually trigger re-exporting journey background images</label></li>
</ul>
</li>
</ul>
<h2 id="2-admin-1-3-days">2. Admin (1-3 days)</h2>
<ul>
<li><input type="checkbox" id="checkbox174"><label for="checkbox174">schema updating course assets, remove unnecessary</label>
<ul>
<li><input type="checkbox" id="checkbox175"><label for="checkbox175">course circle images delete job added &amp; manually invoked</label></li>
<li><input type="checkbox" id="checkbox176"><label for="checkbox176">migration to remove circle images column from courses</label></li>
<li><input type="checkbox" id="checkbox177"><label for="checkbox177">migration to remove title short from courses</label></li>
<li><input type="checkbox" id="checkbox178"><label for="checkbox178">migration to add instructor (req) to courses</label>
each course is assigned the instructor from their first
journey</li>
<li><input type="checkbox" id="checkbox179"><label for="checkbox179">migration to add new optional columns to courses</label>
<ul>
<li><input type="checkbox" id="checkbox180"><label for="checkbox180">preview content file id</label></li>
<li><input type="checkbox" id="checkbox181"><label for="checkbox181">video thumbnail image file id</label></li>
<li><input type="checkbox" id="checkbox182"><label for="checkbox182">background image file id</label></li>
<li><input type="checkbox" id="checkbox183"><label for="checkbox183">logo image file id</label></li>
<li><input type="checkbox" id="checkbox184"><label for="checkbox184">hero image file id</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox185"><label for="checkbox185">migration to add new tables for series assets</label>
<ul>
<li><input type="checkbox" id="checkbox186"><label for="checkbox186">course_videos</label></li>
<li><input type="checkbox" id="checkbox187"><label for="checkbox187">course_video_thumbnail_images</label></li>
<li><input type="checkbox" id="checkbox188"><label for="checkbox188">course_background_images</label></li>
<li><input type="checkbox" id="checkbox189"><label for="checkbox189">course_logo_images</label></li>
<li><input type="checkbox" id="checkbox190"><label for="checkbox190">course_hero_images</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox191"><label for="checkbox191">add new assets to deletion guards in jobs</label>
<ul>
<li><input type="checkbox" id="checkbox192"><label for="checkbox192">course_videos</label></li>
<li><input type="checkbox" id="checkbox193"><label for="checkbox193">course_video_thumbnail_images</label></li>
<li><input type="checkbox" id="checkbox194"><label for="checkbox194">course_background_images</label></li>
<li><input type="checkbox" id="checkbox195"><label for="checkbox195">course_logo_images</label></li>
<li><input type="checkbox" id="checkbox196"><label for="checkbox196">course_hero_images</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox197"><label for="checkbox197">endpoints and jobs for uploading series assets</label>
<ul>
<li><input type="checkbox" id="checkbox198"><label for="checkbox198">upload preview content file</label>
<ul>
<li><input type="checkbox" id="checkbox199"><label for="checkbox199">sweep job</label>
<ul>
<li><input type="checkbox" id="checkbox200"><label for="checkbox200">detects video content files missing thumbnails</label></li>
<li><input type="checkbox" id="checkbox201"><label for="checkbox201">detects video content files missing transcripts</label></li>
<li><input type="checkbox" id="checkbox202"><label for="checkbox202">runs weekly</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox203"><label for="checkbox203">job</label>
<ul>
<li><input type="checkbox" id="checkbox204"><label for="checkbox204">should extract the first frame and upload it as a video thumbnail image</label></li>
<li><input type="checkbox" id="checkbox205"><label for="checkbox205">should extract transcript via whisper and upload it via content_file_transcripts</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox206"><label for="checkbox206">create endpoint</label></li>
<li><input type="checkbox" id="checkbox207"><label for="checkbox207">search endpoint</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox208"><label for="checkbox208">upload video thumbnail image file</label>
<ul>
<li><input type="checkbox" id="checkbox209"><label for="checkbox209">job</label></li>
<li><input type="checkbox" id="checkbox210"><label for="checkbox210">create endpoint</label></li>
<li><input type="checkbox" id="checkbox211"><label for="checkbox211">search endpoint</label>
<ul>
<li><input type="checkbox" id="checkbox212"><label for="checkbox212">includes filter for the preview content file id</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox213"><label for="checkbox213">upload logo image</label>
<ul>
<li><input type="checkbox" id="checkbox214"><label for="checkbox214">job</label></li>
<li><input type="checkbox" id="checkbox215"><label for="checkbox215">endpoint</label></li>
<li><input type="checkbox" id="checkbox216"><label for="checkbox216">create endpoint</label></li>
<li><input type="checkbox" id="checkbox217"><label for="checkbox217">search endpoint</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox218"><label for="checkbox218">upload hero image</label>
<ul>
<li><input type="checkbox" id="checkbox219"><label for="checkbox219">job</label></li>
<li><input type="checkbox" id="checkbox220"><label for="checkbox220">endpoint</label></li>
<li><input type="checkbox" id="checkbox221"><label for="checkbox221">create endpoint</label></li>
<li><input type="checkbox" id="checkbox222"><label for="checkbox222">search endpoint</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox223"><label for="checkbox223">upload background image</label>
<ul>
<li><input type="checkbox" id="checkbox224"><label for="checkbox224">job</label></li>
<li><input type="checkbox" id="checkbox225"><label for="checkbox225">endpoint</label></li>
<li><input type="checkbox" id="checkbox226"><label for="checkbox226">create endpoint</label></li>
<li><input type="checkbox" id="checkbox227"><label for="checkbox227">search endpoint</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox228"><label for="checkbox228">admin series core endpoints</label>
<ul>
<li><input type="checkbox" id="checkbox229"><label for="checkbox229">search series</label></li>
<li><input type="checkbox" id="checkbox230"><label for="checkbox230">create series</label>
<ul>
<li><input type="checkbox" id="checkbox231"><label for="checkbox231">this should not do anything special if the thumbnail image is not</label>
specified</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox232"><label for="checkbox232">patch series</label>
<ul>
<li><input type="checkbox" id="checkbox233"><label for="checkbox233">updating flags can be thought of as similar to soft deletion</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox234"><label for="checkbox234">admin series core frontend</label>
<ul>
<li><input type="checkbox" id="checkbox235"><label for="checkbox235">Series page</label>
<ul>
<li><input type="checkbox" id="checkbox236"><label for="checkbox236">Models</label>
<ul>
<li><input type="checkbox" id="checkbox237"><label for="checkbox237">CourseBackgroundImage</label></li>
<li><input type="checkbox" id="checkbox238"><label for="checkbox238">CourseHeroImage</label></li>
<li><input type="checkbox" id="checkbox239"><label for="checkbox239">CourseLogoImage</label></li>
<li><input type="checkbox" id="checkbox240"><label for="checkbox240">CoursePreviewContent</label></li>
<li><input type="checkbox" id="checkbox241"><label for="checkbox241">CourseVideoThumbnailImage</label></li>
<li><input type="checkbox" id="checkbox242"><label for="checkbox242">Course</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox243"><label for="checkbox243">Block</label>
<ul>
<li><input type="checkbox" id="checkbox244"><label for="checkbox244">Loads classes for series</label></li>
<li><input type="checkbox" id="checkbox245"><label for="checkbox245">Patchable</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox246"><label for="checkbox246">FilterAndSort</label>
<ul>
<li><input type="checkbox" id="checkbox247"><label for="checkbox247">Filters</label>
<ul>
<li><input type="checkbox" id="checkbox248"><label for="checkbox248">Name</label></li>
<li><input type="checkbox" id="checkbox249"><label for="checkbox249">Instructor Name</label></li>
<li><input type="checkbox" id="checkbox250"><label for="checkbox250">Created At</label></li>
<li><input type="checkbox" id="checkbox251"><label for="checkbox251">Flags</label></li>
<li><input type="checkbox" id="checkbox252"><label for="checkbox252">UID</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox253"><label for="checkbox253">Sort</label>
<ul>
<li><input type="checkbox" id="checkbox254"><label for="checkbox254">Name</label></li>
<li><input type="checkbox" id="checkbox255"><label for="checkbox255">Created At</label></li>
<li><input type="checkbox" id="checkbox256"><label for="checkbox256">Instructor Name</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox257"><label for="checkbox257">Listing</label></li>
<li><input type="checkbox" id="checkbox258"><label for="checkbox258">Create</label></li>
<li><input type="checkbox" id="checkbox259"><label for="checkbox259">Page Glue</label></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-series-core-2-4-days">3. Series Core (2-4 days)</h2>
<p><em>unflagged</em> = not behind a feature flag, only marked for frontend changes</p>
<ul>
<li><input type="checkbox" id="checkbox260"><label for="checkbox260"></label><em>unflagged</em> Owned tab in my library explicitly filters to joined series</li>
<li><input type="checkbox" id="checkbox261"><label for="checkbox261">/api/1/users/me/search_course_journeys updated</label>
<ul>
<li><input type="checkbox" id="checkbox262"><label for="checkbox262">model updated for optional </label><code>joined_course_at</code>, including <code>is_next</code> docs</li>
<li><input type="checkbox" id="checkbox263"><label for="checkbox263">if no filter is specified for </label><code>joined_course_at</code> its assumed to be <code>neq null</code>,
for backwards compatibility. use greater than or null 0 as a no-op comparison,
which we strip if specified for now.</li>
<li><input type="checkbox" id="checkbox264"><label for="checkbox264">includes course flags bit 7 support</label></li>
<li><input type="checkbox" id="checkbox265"><label for="checkbox265">add new fields to series description within journeys</label>
<ul>
<li><input type="checkbox" id="checkbox266"><label for="checkbox266">instructor name</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox267"><label for="checkbox267">add new fields to returned journeys</label>
<ul>
<li><input type="checkbox" id="checkbox268"><label for="checkbox268">background image</label></li>
<li><input type="checkbox" id="checkbox269"><label for="checkbox269">duration</label></li>
<li><input type="checkbox" id="checkbox270"><label for="checkbox270">description</label></li>
<li><input type="checkbox" id="checkbox271"><label for="checkbox271">instructor name</label></li>
</ul>
</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox272"><label for="checkbox272">Add </label><code>user_course_likes</code> model</li>
<li><input type="checkbox" id="checkbox273"><label for="checkbox273">/courses/search_public</label></li>
<li><input type="checkbox" id="checkbox274"><label for="checkbox274">Series Listing Screen</label></li>
<li><input type="checkbox" id="checkbox275"><label for="checkbox275">Homepage Bottom Nav</label></li>
<li><input type="checkbox" id="checkbox276"><label for="checkbox276">Series Preview Screen</label></li>
<li><input type="checkbox" id="checkbox277"><label for="checkbox277">Series Details Screen</label></li>
</ul>
<h2 id="4-upgrade-screen--related-1-2-days">4. Upgrade Screen &amp; related (1-2 days)</h2>
<ul>
<li><input type="checkbox" id="checkbox278"><label for="checkbox278"></label><em>unflagged</em> restyle settings</li>
<li><input type="checkbox" id="checkbox279"><label for="checkbox279">Upgrade Screen</label>
<ul>
<li><input type="checkbox" id="checkbox280"><label for="checkbox280">plausible page view</label></li>
<li><input type="checkbox" id="checkbox281"><label for="checkbox281">plausible goals documented in backend</label></li>
<li><input type="checkbox" id="checkbox282"><label for="checkbox282">plausible goals added via plausible web interface</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox283"><label for="checkbox283">/users/me/get_customer_portal</label></li>
<li><input type="checkbox" id="checkbox284"><label for="checkbox284">settings: Upgrade / Manage Membership</label></li>
<li><input type="checkbox" id="checkbox285"><label for="checkbox285">settings: Restore Purchases (native app only)</label></li>
</ul>
<h2 id="5-sharing-2-4-days">5. Sharing (2-4 days)</h2>
<ul>
<li><input type="checkbox" id="checkbox286"><label for="checkbox286">New tables &amp; documentation</label>
<ul>
<li><input type="checkbox" id="checkbox287"><label for="checkbox287">course_slugs</label></li>
<li><input type="checkbox" id="checkbox288"><label for="checkbox288">course_share_links</label></li>
<li><input type="checkbox" id="checkbox289"><label for="checkbox289">course_share_link_views</label></li>
<li><input type="checkbox" id="checkbox290"><label for="checkbox290">course_share_link_stats</label></li>
<li><input type="checkbox" id="checkbox291"><label for="checkbox291">course_share_link_unique_views</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox292"><label for="checkbox292">New admin visibility section</label>
<ul>
<li><input type="checkbox" id="checkbox293"><label for="checkbox293">don't need to repeat the explanatory flow graph (its the same)</label></li>
<li><input type="checkbox" id="checkbox294"><label for="checkbox294">sweep job block (for block stats)</label></li>
<li><input type="checkbox" id="checkbox295"><label for="checkbox295">log job block (for block stats)</label></li>
<li><input type="checkbox" id="checkbox296"><label for="checkbox296">raced confirmations sweep job block (for block stats)</label></li>
<li><input type="checkbox" id="checkbox297"><label for="checkbox297">views chart</label></li>
<li><input type="checkbox" id="checkbox298"><label for="checkbox298">unique views chart</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox299"><label for="checkbox299">Update existing admin sharing highlights</label>
<ul>
<li><input type="checkbox" id="checkbox300"><label for="checkbox300">/admin/journey_share_links/top_sharers includes series share info</label></li>
<li><input type="checkbox" id="checkbox301"><label for="checkbox301">simple top block accepts path as array of string, sums values</label></li>
<li><input type="checkbox" id="checkbox302"><label for="checkbox302">Add related highlight endpoints</label>
<ul>
<li><input type="checkbox" id="checkbox303"><label for="checkbox303">links created</label></li>
<li><input type="checkbox" id="checkbox304"><label for="checkbox304">views</label></li>
<li><input type="checkbox" id="checkbox305"><label for="checkbox305">attributable users</label></li>
<li><input type="checkbox" id="checkbox306"><label for="checkbox306">unique views</label></li>
</ul>
</li>
<li><input type="checkbox" id="checkbox307"><label for="checkbox307">update sharing dashboard to use sums in highlights</label></li>
</ul>
</li>
</ul>

</body>
</html>
